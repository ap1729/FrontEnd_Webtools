<!DOCTYPE html>
<html>

<head>
</head>
<meta charset="utf-8">
<title>Circles Varying</title>
<style>
body {
  position: relative;
  width: 960px;
}
svgContainer {
  font: 10px sans-serif;
  shape-rendering: crispEdges;
}
rect {
  fill: #ddd;
}
.axis path,
.axis line {
  fill: none;
  stroke: #fff;
}
button {
  position: absolute;
  left:1100px;
  top: 50px;
}
</style>

<button>Reset</button>

<script src="d3/d3.min.js"></script>


<body>

<script>
 //data used to plot graphs 
 //var col1=[1,2,3,4,5,6,7,8,9,10];
 //var x1 = [1,2,3,4,5,6,7,8,9,10];
 //var y1 =[1,1,2,2,3,3,4,4,5,5];
 //var m1=[2,3,4,6,7,9,11,13,14,15];
 //var m2=[5,6,10,15,40,35,21,24,15,7];

/*
 d3.csv("/home/aditya/Desktop/table1.csv",function(csv)
 {
  
 csv.map(function(d) {
   var col1 =d[0];
  // var x1=d[1];
  var x1 = [1,2,3,4,5,6,7,8,9,10];
   func(x1);
   var y1=d[2];
   var m1=d[3];
   var m2=d[4];
   var m3=d[5];
   
 })
*/
var x1=[],col1=[],y1=[],m1=[],m2=[],m3=[];
d3.text("table1.csv", function(text) {
  var data = d3.csv.parseRows(text).map(function(row) {
    return row.map(function(value) {
      return +value;    //to convert text to numbers
    });
  });
   col1=data[0];
   x1=data[1];   
   y1=data[2];
   m1=data[3];
   m2=data[4];
   m3=data[5];   //Taking data from respective rows
});
 window.alert();
 //window.alert(x1[0]);



 var margin = {top: 0, right: 10, bottom: 15, left: 100},
    width = 900 //- margin.left - margin.right,
    height = 400 //- margin.top - margin.bottom;
 var x = d3.scale.linear()
    .domain([margin.left-(width/2), margin.left+(width / 2)]) // changes range of values for x axis
    .range([0, width]);
var y = d3.scale.linear()
    .domain([-height / 2, height / 2]) // changes range of values for y axis
    .range([height, 0]);
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .ticks(20)
    .tickSize(-height);
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .ticks(10)
    .tickSize(-width);
var zoom = d3.behavior.zoom()
    .x(x)
    .y(y)
    .scaleExtent([1,10000 ])   //this controls maximum zooming amount
    .center([width / 2, height / 2])
    .size([width, height])
    .on("zoom", zoomed);
 var svg = d3.select("body").append("svg").attr("width", width+margin.left + margin.right).attr("height", height+margin.top + margin.bottom)
 .append("g")
    .call(zoom);
 d3.select("button").on("click", reset);
svg.append("rect")
    .attr("width", width+margin.left + margin.right )
    .attr("height", height+margin.top + margin.bottom);
var svgContainer=svg.append("g");
svgContainer.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);
svgContainer.append("g")
    .attr("class", "y axis")
    .call(yAxis);
function zoomed() {
 // svg.select(".x.axis").call(xAxis);
 // svg.select(".y.axis").call(yAxis); //above two causes fixed axis


  svgContainer.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");

  //above line causes movement also
}//above function causes zooming which is called in var zoom
function reset() {
  svgContainer.call(zoom
      .x(x.domain([-width / 2, width / 2]))
      .y(y.domain([-height / 2, height / 2]))
      .event);
}
//m1 and m2 varying along both x and y axis
//m1 is represented as radius,m2 in color using some sort of gray scale,minimum is white and maximum is black
var min1=Math.min.apply(null,m2)+5
var max1=Math.max.apply(null,m2)
for(i=0;i<col1.length;i++)
{
 var circle=svgContainer.append("circle").attr("cx",20).attr("cy", 100).attr("r",1.5*m1[i]).attr("style","fill:rgb(0,0,0) ;stroke: blue ;stroke-width: 2");
 }
 var rect=svgContainer.append("rect").attr("x", margin.left+250).attr("y",height-5).attr("width",10).attr("height",10).attr("style","fill:rgb(255,0,0) ;stroke: blue ;stroke-width: 2");//ORIGIN ,the number 250 has to be seen to compensate for the origin shift
d3.selectAll("circle").data(m2).style('fill', function(d){return d3.rgb(((max1-d)*255/(max1-min1)),((max1-d)*255/(max1-min1)),((max1-d)*255/(max1-min1)))});
d3.selectAll("circle").data(x1).attr("cx",function(d){return margin.left+250+50*d});
d3.selectAll("circle").data(y1).attr("cy",function(d){return height-(50*d)})
</script>



</body>

</html>